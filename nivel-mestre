#include <stdio.h>

#define TAM 10
#define H 7        // Tamanho das matrizes de habilidade
#define NAVIO 3
#define HABILIDADE 5

//------------------------------------------------------------
// Função genérica para aplicar matriz de habilidade no tabuleiro
//------------------------------------------------------------
void aplicarHabilidade(int tab[TAM][TAM], int hab[H][H], int origemL, int origemC){
    int i, j;

    int deslocL = origemL - H/2;
    int deslocC = origemC - H/2;

    for(i = 0; i < H; i++){
        for(j = 0; j < H; j++){
            if(hab[i][j] == 1){
                int linha = deslocL + i;
                int coluna = deslocC + j;

                if(linha >= 0 && linha < TAM && coluna >= 0 && coluna < TAM){
                    if(tab[linha][coluna] != NAVIO){   // Não sobrescreve navios
                        tab[linha][coluna] = HABILIDADE;
                    }
                }
            }
        }
    }
}

//------------------------------------------------------------
// CONSTRÓI MATRIZ EM FORMA DE CONE
//------------------------------------------------------------
void gerarCone(int cone[H][H]){
    for(int i = 0; i < H; i++){
        for(int j = 0; j < H; j++){
            cone[i][j] = (j >= (H/2 - i) && j <= (H/2 + i)) ? 1 : 0;
        }
    }
}

//------------------------------------------------------------
// CONSTRÓI MATRIZ EM FORMA DE CRUZ
//------------------------------------------------------------
void gerarCruz(int cruz[H][H]){
    for(int i = 0; i < H; i++){
        for(int j = 0; j < H; j++){
            cruz[i][j] = (i == H/2 || j == H/2) ? 1 : 0;
        }
    }
}

//------------------------------------------------------------
// CONSTRÓI MATRIZ EM FORMA DE OCTAEDRO (LOSANGO)
//------------------------------------------------------------
void gerarOctaedro(int oct[H][H]){
    for(int i = 0; i < H; i++){
        for(int j = 0; j < H; j++){
            int dist = abs(i - H/2) + abs(j - H/2);
            oct[i][j] = (dist <= H/2) ? 1 : 0;
        }
    }
}

//------------------------------------------------------------
// IMPRIME MATRIZ TABULEIRO
//------------------------------------------------------------
void imprimirTabuleiro(int tab[TAM][TAM]){
    printf("\n======= TABULEIRO FINAL =======\n\n");
    for(int i = 0; i < TAM; i++){
        for(int j = 0; j < TAM; j++){
            printf("%d ", tab[i][j]);
        }
        printf("\n");
    }
}

//------------------------------------------------------------
// MAIN
//------------------------------------------------------------
int main(){

    int tabuleiro[TAM][TAM];

    // Inicializa tudo com água
    for(int i = 0; i < TAM; i++)
        for(int j = 0; j < TAM; j++)
            tabuleiro[i][j] = 0;

    //--------------------------------------------------------
    // POSICIONA DOIS NAVIOS DE TAMANHO 3
    //--------------------------------------------------------
    tabuleiro[2][2] = tabuleiro[2][3] = tabuleiro[2][4] = NAVIO;  // Horizontal
    tabuleiro[6][7] = tabuleiro[7][7] = tabuleiro[8][7] = NAVIO;  // Vertical

    //--------------------------------------------------------
    // MATRIZES DE HABILIDADES
    //--------------------------------------------------------
    int cone[H][H], cruz[H][H], octaedro[H][H];

    gerarCone(cone);
    gerarCruz(cruz);
    gerarOctaedro(octaedro);

    //--------------------------------------------------------
    // APLICA HABILIDADES NO TABULEIRO
    //--------------------------------------------------------

    aplicarHabilidade(tabuleiro, cone, 1, 2);      // Cone no topo
    aplicarHabilidade(tabuleiro, cruz, 5, 5);      // Cruz no centro
    aplicarHabilidade(tabuleiro, octaedro, 7, 3);  // Octaedro à direita inferior

    //--------------------------------------------------------
    // IMPRIME TABULEIRO FINAL
    //--------------------------------------------------------
    imprimirTabuleiro(tabuleiro);

    printf("\nLegenda:\n0 = água\n3 = navio\n5 = área de habilidade\n");

    return 0;
}
